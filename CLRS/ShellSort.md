# 希尔排序
## 算法简介
希尔排序是一种基于**插入排序**的快速的排序算法。

1. **插入排序的弊端：**

   - 对于大规模乱序数组排序很慢
   - 如果**主键最小元素**正好在数组的尽头，要将他挪到正确的位置就需要 $N-1$次移动。

2. **希尔排序对插入排序的改进：**

   - 交换不相邻的元素以对数组的局部进行排序
   - 最终用插入排序将局部有序的数组排序
   - **任意间隔为h的元素**都是有序的，称为**h有序数组**

## 算法代码
```java
public static void shellSort(int[] arr) {
    int length = arr.length;
    int temp;
    for (int step = length / 3; step >= 1; step /= 3) {
        for (int i = step; i < length; i++) {
            temp = arr[i];
            int j = i - step;
            while (j >= 0 && arr[j] > temp) {  //寻找之前的相同间隔的元素，有没有比arr[j]更大的数了
                //如果有，就把这个数向后面挪一位
                arr[j + step] = arr[j];
                //j就是元素角标，这里 j-step 的意思就是，找到相同间隔之前的元素角标
                j -= step;
            }
            //下面这句可以把arr[j]元素放到合适的位置上面
            arr[j + step] = temp;
        }
    }
}
```
## 算法分析

1. **时间复杂度分析**

    时间复杂度的分析，对于不同的**间隙**(**gap**)时间复杂度是不同的，因此在这里不在说明时间复杂度的相关分析。

2. **算法运行过程的分析**

    ![20191204222000.png](https://i.loli.net/2019/12/04/uRFDBjJ1HEim8YO.png)
    **红框**表示未排序的，间隔为3的数组

    **篮框**表示已排序的，间隔为3的有序数组。这些操作都是由**第二个for循环**排序，每一个小的有间隔的数组，都以插入排序的方式排序。最后，间隔变为1，即通过简单的插入排序的方法，将数组排序。

    此时的数组，已经极为适合插入排序的操作了，因此最差情况，不会是$O(n^2)$
